import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;


public class SimpleCalendarFrame extends JFrame implements ChangeListener {

	
    private CalendarController eventController;
    private CalendarModel CalendarModel;
    //day view is the right side of the panel
    private DayView DayView;
    private MonthView monthView;
    final JPanel rightPanel;
    private JPanel rightView = new JPanel();
    

    /**
     * CalendarFrame constructor creates a CalendarFrame object
     *
     */
    public SimpleCalendarFrame() throws IOException
    {
    	
    	//has the day view
        CalendarModel = new CalendarModel();

        DayView = new DayView(CalendarModel);
        monthView = new MonthView(CalendarModel);
        rightPanel = new JPanel(new BorderLayout());
        JPanel rightChoicePanel = new JPanel(new FlowLayout());
       
        JButton dayChoice = new JButton("Day");
        JButton weekChoice = new JButton("Week");
        JButton monthChoice = new JButton("Month");
        JButton fourDaysChoice = new JButton("4 Days");
        JButton agendaChoice = new JButton("Agenda");
        rightChoicePanel.add(dayChoice);
        rightChoicePanel.add(weekChoice);
        rightChoicePanel.add(monthChoice);
        rightChoicePanel.add(fourDaysChoice);
        rightChoicePanel.add(agendaChoice);
        
        
        dayChoice.addActionListener(new ActionListener(){
			@Override
			public void actionPerformed(ActionEvent e) {
				rightPanel.remove(rightView);
				rightPanel.add(DayView, BorderLayout.CENTER);
				repaint();
			}
        });
       
        rightPanel.add(rightChoicePanel, BorderLayout.NORTH);
       
        CalendarModel.addChangeListener(this);

        eventController = new CalendarController(CalendarModel);
        eventController.set(DayView);

        final CalendarView calendar = new CalendarView(eventController, CalendarModel);
        JPanel left = new JPanel();
        left.setLayout(new BorderLayout());

        JPanel p = new JPanel(new FlowLayout());
        p.add(calendar);
        calendar.setPreferredSize(new Dimension(300, 300));
   
        left.add(p, BorderLayout.CENTER);

        

        setLayout(new BorderLayout());
        add(left, BorderLayout.WEST);
        add(rightPanel, BorderLayout.CENTER);
        setTitle("CALENDAR");

        rightPanel.add(DayView, BorderLayout.CENTER);
        rightPanel.validate();
        eventController.get().view(eventController.getYear(), eventController.getMonth(), eventController.getDay());
        rightPanel.repaint();
    }

 
    /**
     * stateChanged() repaints dayView
     * @param: CalendarModel
     */
    public void stateChanged(ChangeEvent e) 
    {
    	rightPanel.removeAll();
        rightPanel.add(monthView, BorderLayout.CENTER);
        rightPanel.validate();
        rightPanel.repaint();
        this.repaint();
    }
}
